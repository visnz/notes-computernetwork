# 协议
常见的网络协议
  - 数据链路层：ARP、IEEE(Wi-Fi)、PPP
  - 网络层：IP、ICMP、IPsec
  - 传输层：TCP、UDP、PPTP、TLS\SSL
  - 应用层：HTTP、FTP、DHCP、DNS

## 网络协议
为进行网络中的数据交换而建立的规则、标准或约定，规定了所交换的数据的格式以及有关的同步问题，即称为网络协议。主要由**语法**、**语义**和**同步** 组成

语法：即数据与控制信息的结构或格式

语义：即需要发出何种控制信息，完成何种动作以及做出何种响应

同步：即事件实现顺序的详细说明，即时序

# 分层
1. 应用层
应用层是原理体系结构中的最高层。应用层确定进程之间通信的性质以满足用户的需要，直接为用户的应用进程提供服务

2. 传输层
运输层的任务就是负责主机中两个进程之间的通信，有复用和分用的功能，提供可靠的、透明的端到端的数据传输，以及差错控制和流量控制机制。有面向连接的 TCP 和无连接的 UDP

3. 网络层
进行路由选择、拥塞控制和网络互连，负责为分组交换网上的不同主机提供通信。在网络层，数据的传送单位是 分组。在TCP/IP体系中，分组也叫作 数据报

4. 数据链路层
数据链路层的任务是在两个相邻结点间的线路上无差错地传送以 帧 为单位的数据，同时每一帧包括数据和必要的控制信息。
数据链路层就把一条有可能出差错的实际链路，转变成为让网络层向下看去好像是一条不出差错的链路

5. 物理层
物理层的任务就是透明地传送比特流。即实现通信结点之间的物理连接，在物理传输介质上传输非结构化的“0”和“1”二进制比特流。
物理媒体并不属于物理层



![](/.src/pic/分层.png)



基于协议产生了协议分层，一个层负责一部分内容，层与层之间通过协议通信
> 分层模型是协议设计的最重要的规则。
>
> 设计者不是设计一个单一的、巨大的协议来为所有的通信规定完整的细节，而是采取了把通信问题划分为成多个小问题，然后为每个小问题设计一个单独的协议的方法，这样做使得每个协议的设计、分析、实现、测试比较容易，降低了设计的复杂性，同时也便于维护
>
> 将网络功能独立成不同的层次，减低整体协议因技术变化而受的冲击。不需要更改物理网络，新的应用程序就能加入，而新的网络硬件安装后，也不必重新设计应用软件

协议分层需遵循的通用原则
> 层次数量要适当：若层次太少，每一层协议太复杂。太多又会在描述和综合各层功能的系统工程任务时遇到许多困难。
>
> 每一层的功能明确，专职做好自己的工作，接受上层调度

分层可以带来如下好处
1. 层层之间独立
2. 灵活
3. 结构上可分割
4. 易于实现和维护
5. 促进标准化


## 分层对应的数据结构
![](/assets/sp180113_004601.png)



![](/.src/pic/分层1.png)
> 貌似只有数据链路层有帧尾部，其他的协议都只加头部

应用进程数据要经过如图的复杂过程才能到达终点的应用进程，但对用户都被屏蔽掉了，以致于任何层次都觉得好像直接把数据沿水平虚线传递到对方

![](/.src/pic/分层2.png)

# 服务
> 协议是控制两个对等实体进行通信的规则的集合。协议精确地规定在网络通信中使用的各种控制信息的格式、意义以及各种事件出现的先后顺序
>
> 服务是由下层向上层通过层间接口提供的

服务与协议的区别