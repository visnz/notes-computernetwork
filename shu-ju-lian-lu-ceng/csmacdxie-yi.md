# CSMA/CD协议
载波监听多点接入/碰撞检测，使得以太网可以将许多计算机连接到一跟总线上，在广播特性的总线上实现一对一通信
- 载波监听(CSMA)：发送前先监听。每个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞。
- 多点接入：计算机以多点接入的方式连接在一跟总线上。
- 碰撞检测(CD)：边发送边监听。计算机边发送数据边检测信道上的信号是否发生碰撞（冲突），一旦发现总线上出现了碰撞，就立即停止发送，然后等待一段随机时间后再次发送
![](/.src/pic/碰撞检测.png)

> 使用CSMA/CD协议的以太网不可能进行全双工通信而只能进行双向交替通信(半双工通信)

## CSMA/CD协议的要点
1. 适配器从网络层获得一个分组，加上以太网的首部和尾部，组成以太网帧，放入适配器的缓存中，准备发送
2. 若适配器检测到信道空闲，就发送这个帧。若检测到信道忙，则继续检测并等待信道转为空闲，然后发送这个帧
3. 在发送过程中继续检测信道，若一直未检测到碰撞，就顺利把这个帧成功发送完毕。若检测到碰撞，则中止数据的发送，并发送人为干扰信号
4. 在中止发送后，适配器就执行指数退避算法，等待r倍51.2μs后，返回到步骤2

### 集线器、广播域与冲突域

广播域：广播域中的任意一个节点可以在数据链路层通过广播的方式到达任意一个节点

冲突域(碰撞域)：以太网中，某个CSMA/CD网络上的两台计算机在同时通信时会发生冲突，那这个CSMA/CD网络就是一个冲突域

通过集线器来划分碰撞域来扩展、覆盖更大范围的多级结构以太网
![](/.src/pic/冲突域.png)

集线器局域网优缺点:
- 使不同局域网上的计算机可互相通信
- 扩大局域网覆盖范围
- 集线器连接的网络在一个碰撞域中，降低网络的最大吞吐量
- 集线器不能连接速率不同的以太网，基本上是个多端口的转发器，不能将帧进行缓存
