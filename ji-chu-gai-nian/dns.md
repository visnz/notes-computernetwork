# DNS
DNS报文使用UDP，分为**询问报文**和**答应报文**
![](/.src/pic/DNS.png)

## 域名服务器分类

1. 根域名服务器(root name server) 	
2. 顶级域名服务器（TLD 服务器）
3. 权限域名服务器(authoritative name server)
4. 本地域名服务器(local name server)（默认域名服务器）

## 根域名服务器
- 世界上一共提供十三个根域名服务器（13个域名地址），共同指向“根域名解析服务”。并不是真的只有13台机器。而是由接近几百台服务器构成的一个“根域名解析服务提供商”，每台机器都有若干根服务器镜像组成，用于就近解决根域名解析服务。

## DNS报文查询
查询的方法在DNS报文中进行指定
- 递归查询：向上一级提出查询申请，由上一级代理查询，再依次返回。这种方法经过根域名服务器，交通计算量较大。
![](/assets/sp180113_013107.png)

- 迭代查询：向上一级提出查询申请，请求上一级告知应该去哪里查询。这种方法由本地域名服务器承载计算。
![](/assets/sp180113_013114.png)

DNS报文（UDP报文）中13个跟服务器信息，原因是DNS报文最大限制为512byte，跟最低MTU有关（X.25协议（Dial Up/Modem）：576字节，DNS报文 + UDP+ IP= 512+8+20=540Byte），即DNS报文查询无需IP分片

## DNS高速缓存
![](/.src/pic/DNS2.png)

